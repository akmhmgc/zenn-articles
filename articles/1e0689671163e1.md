---
title: "Hash#sliceã¨ActiveRecord::Core#sliceã®é•ã„"
emoji: "ğŸ“š"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ['Ruby','rails']
published: false
---

## æ¦‚è¦
Railsã§ã¯ActiveRecord::Baseã‚ã‚‹ã„ã¯ApplicationRecordã‚’ç¶™æ‰¿ã—ãŸã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã—ã¦`slice`ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```ruby
 Fruit.first.slice(:name)
  Fruit Load (0.1ms)  SELECT "fruits".* FROM "fruits" ORDER BY "fruits"."id" ASC LIMIT ?  [["LIMIT", 1]]
hello                                                                                        
=> {"name"=>"organge"}  
```

ä¸€æ–¹ã§ã“ã‚Œã¨ã¯åˆ¥ã«Rubyã®`Hash#slice`ãŒå­˜åœ¨ã™ã‚‹ã®ã§ä»Šå›ã¯ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è¾¿ã‚‹ã“ã¨ã§ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§è¡Œã‚ã‚Œã¦ã„ã‚‹å‡¦ç†ã‚’ç¢ºèªã—ã¾ã™ã€‚


## ActiveRecord::Core#slice

https://github.com/rails/rails/blob/b1c5ae394782e3a766c99012d9ad87476d095544/activemodel/lib/active_model/access.rb#L8-L10

ã¾ãšã€è¤‡æ•°ã®å€¤ã‚’`methods`ã¨ã„ã†å¼•æ•°ã«é…åˆ—ã¨ã—ã¦å—ã‘å–ã£ã¦ã„ã¾ã™ã€‚[`Array#flatten`](https://docs.ruby-lang.org/ja/latest/method/Array/i/flatten.html)ã§é…åˆ—ã‚’å¹³å¦åŒ–ã—ã¦ã„ã‚‹ã®ã§ã€ä»¥ä¸‹ã®äºŒã¤ã®å‘¼ã³å‡ºã—æ–¹ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

```ruby
Fruit.first.slice(:name, :color)

# å¼•æ•°methodsã«ã¯[[:name, :color]]ã¨ã—ã¦æ¸¡ã‚‹ãŒå¹³å¦åŒ–ã•ã‚Œã‚‹ã®ã§å•é¡Œãªã—
Fruit.first.slice([:name, :color])
```
