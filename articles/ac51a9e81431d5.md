---
title: "Railsã‚¬ã‚¤ãƒ‰ãƒ¡ãƒ¢"
emoji: "ğŸ¦§"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ['Rails']
published: false
---

## Active Record ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- é€†é€²ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚‹å ´åˆã¯`revert`ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹
```ruby
require_relative '20220918062843_add_part_number_to_posts'

class FixupExampleMigration < ActiveRecord::Migration[7.0]
  def change
    revert AddPartNumberToPosts
  end
end
```

- ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§`execute`ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§[ãƒˆãƒªã‚¬ãƒ¼](https://docs.oracle.com/cd/E15817_01/server.111/e05765/triggers.htm)ã‚’ã¯ã˜ã‚ã¨ã™ã‚‹SQLã®ãƒ—ãƒ­ã‚·ãƒ¼ã‚¸ãƒ£æ©Ÿèƒ½ã‚’å°å…¥ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ãŒã€Active Recordã®ã€Œé«˜åº¦ãªæ©Ÿèƒ½ã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã¯ãªããƒ¢ãƒ‡ãƒ«ã«å­˜åœ¨ã™ã‚‹ã€ã¨ã„ã†ã‚³ãƒ³ã‚»ãƒ—ãƒˆã«åã™ã‚‹ã®ã§ã‚ã¾ã‚Šä½¿ç”¨ã•ã‚Œãªã„

## Active Record ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- å±æ€§åã‚’å‹•çš„ã«å¤‰æ›´å¯èƒ½ãªãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½œã‚Šæ–¹

```ruby
class CamelValidator < ActiveModel::Validator
  def validate(record)
    field = options[:field]
    return if record.public_send(field) != record.public_send(field).upcase

    record.errors.add field, "å¤§æ–‡å­—ã§ã™"
  end
end
```

```ruby
class Fruit < ApplicationRecord
  validates_with CamelValidator, field: :name
end
```

